"use strict";(self.webpackChunktask_app=self.webpackChunktask_app||[]).push([[384],{5384:(G,g,l)=>{l.r(g),l.d(g,{FormsModule:()=>J,createTransLoader:()=>f});var c=l(6814),m=l(787),n=l(6223),r=l(4574),t=l(5879),h=l(2425),v=l(4229),Z=l(3234),u=l(9515),_=l(5940);function x(e,a){1&e&&(t.TgZ(0,"p",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"errors.invalidEmail")," "))}function N(e,a){1&e&&(t.TgZ(0,"p",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"errors.invalidPassword")," "))}function C(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"div",7)(1,"form",13)(2,"div",14)(3,"div",4)(4,"label",15),t._uU(5,"Email"),t.qZA(),t._UZ(6,"input",16),t.YNc(7,x,3,3,"p",17),t.qZA(),t.TgZ(8,"div",4)(9,"label",15),t._uU(10,"Password"),t.qZA(),t._UZ(11,"input",18),t.YNc(12,N,3,3,"p",17),t.TgZ(13,"button",19),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.login())}),t._uU(14," Login "),t.qZA(),t.TgZ(15,"p"),t._uU(16,"or"),t.qZA(),t._UZ(17,"hr"),t.TgZ(18,"button",20),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.sectionChange("signup"))}),t._uU(19),t.ALo(20,"translate"),t.qZA()()()()()}if(2&e){const i=t.oxw(2);t.xp6(1),t.Q6J("formGroup",i.loginForm),t.xp6(6),t.Q6J("ngIf",1==i.submittedLogin&&i.loginForm.controls.email.invalid),t.xp6(5),t.Q6J("ngIf",1==i.submittedLogin&&i.loginForm.controls.password.invalid),t.xp6(6),t.Q6J("ngClass",i.background?"text-light":"text-dark"),t.xp6(1),t.hij(" ",t.lcZ(20,5,"buttons.register")," ")}}function A(e,a){1&e&&(t.TgZ(0,"div",7),t._UZ(1,"mat-spinner",22),t.qZA())}function F(e,a){if(1&e&&(t.TgZ(0,"div",2)(1,"div",7)(2,"p",8),t._uU(3,"Login"),t.qZA(),t.TgZ(4,"p",9),t._uU(5," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. "),t.qZA()(),t.YNc(6,C,21,7,"div",10),t.YNc(7,A,2,0,"ng-template",11,12,t.W1O),t.qZA()),2&e){const i=t.MAs(8),o=t.oxw();t.xp6(6),t.Q6J("ngIf",!o.isLoading)("ngIfElse",i)}}function T(e,a){1&e&&(t.TgZ(0,"p",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"errors.invalidField")," "))}function O(e,a){1&e&&(t.TgZ(0,"p",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"errors.invalidField")," "))}function R(e,a){if(1&e&&(t.TgZ(0,"option",35),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.s9C("value",i.name),t.xp6(1),t.hij(" ",i.name," ")}}function U(e,a){1&e&&(t.TgZ(0,"p",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"errors.invalidSelect")," "))}function E(e,a){1&e&&(t.TgZ(0,"p",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"errors.invalidAutoFill")," "))}function S(e,a){1&e&&(t.TgZ(0,"p",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"errors.invalidAutoFill")," "))}function L(e,a){1&e&&(t.TgZ(0,"p",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"errors.invalidEmail")," "))}function b(e,a){1&e&&(t.TgZ(0,"p",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"errors.invalidPassword")," "))}function q(e,a){1&e&&(t.TgZ(0,"p",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"errors.invalidSelect")," "))}function I(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"div",7)(1,"form",13)(2,"div",14)(3,"div",4)(4,"label",15),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"input",23),t.YNc(8,T,3,3,"p",17),t.qZA(),t.TgZ(9,"div",4)(10,"label",15),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._UZ(13,"input",24),t.YNc(14,O,3,3,"p",17),t.qZA(),t.TgZ(15,"div",4)(16,"label",15),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"select",25),t.NdJ("change",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.getRegionAndCapByCityName(s.signupForm.controls.citta.value))}),t._UZ(20,"option",26),t.YNc(21,R,2,2,"option",27),t.qZA(),t.YNc(22,U,3,3,"p",17),t.qZA(),t.TgZ(23,"div",7)(24,"label",15),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"input",28),t.YNc(28,E,3,3,"p",17),t.qZA(),t.TgZ(29,"div",7)(30,"label",15),t._uU(31,"Cap"),t.qZA(),t._UZ(32,"input",29),t.YNc(33,S,3,3,"p",17),t.qZA(),t.TgZ(34,"div",4)(35,"label",15),t._uU(36,"Email"),t.qZA(),t._UZ(37,"input",16),t.YNc(38,L,3,3,"p",17),t.qZA(),t.TgZ(39,"div",4)(40,"label",15),t._uU(41,"Password"),t.qZA(),t._UZ(42,"input",18),t.YNc(43,b,3,3,"p",17),t.qZA(),t.TgZ(44,"div",30),t._UZ(45,"input",31),t.TgZ(46,"label",32),t._uU(47," M "),t.qZA()(),t.TgZ(48,"div",30),t._UZ(49,"input",33),t.TgZ(50,"label",34),t._uU(51," F "),t.qZA()(),t.TgZ(52,"div",4),t.YNc(53,q,3,3,"p",17),t.qZA(),t.TgZ(54,"button",19),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.register())}),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"p"),t._uU(58,"or"),t.qZA(),t._UZ(59,"hr"),t.TgZ(60,"button",20),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.sectionChange("login"))}),t._uU(61," Login "),t.qZA()()()()}if(2&e){const i=t.oxw(2);t.xp6(1),t.Q6J("formGroup",i.signupForm),t.xp6(4),t.Oqu(t.lcZ(6,16,"signup.name")),t.xp6(3),t.Q6J("ngIf",1==i.submittedSignup&&i.signupForm.controls.nome.invalid),t.xp6(3),t.Oqu(t.lcZ(12,18,"signup.surname")),t.xp6(3),t.Q6J("ngIf",1==i.submittedSignup&&i.signupForm.controls.cognome.invalid),t.xp6(3),t.Oqu(t.lcZ(18,20,"signup.city")),t.xp6(4),t.Q6J("ngForOf",i.cities),t.xp6(1),t.Q6J("ngIf",1==i.submittedSignup&&i.signupForm.controls.citta.invalid),t.xp6(3),t.Oqu(t.lcZ(26,22,"signup.region")),t.xp6(3),t.Q6J("ngIf",1==i.submittedSignup&&i.signupForm.controls.regione.invalid),t.xp6(5),t.Q6J("ngIf",1==i.submittedSignup&&i.signupForm.controls.cap.invalid),t.xp6(5),t.Q6J("ngIf",1==i.submittedSignup&&i.signupForm.controls.email.invalid),t.xp6(5),t.Q6J("ngIf",1==i.submittedSignup&&i.signupForm.controls.password.invalid),t.xp6(10),t.Q6J("ngIf",1==i.submittedSignup&&i.signupForm.controls.sex.invalid),t.xp6(2),t.hij(" ",t.lcZ(56,24,"buttons.register")," "),t.xp6(5),t.Q6J("ngClass",i.background?"text-light":"text-dark")}}function y(e,a){1&e&&(t.TgZ(0,"div",7),t._UZ(1,"mat-spinner",22),t.qZA())}function M(e,a){if(1&e&&(t.TgZ(0,"div",2)(1,"div",7)(2,"p",8),t._uU(3,"Signup"),t.qZA(),t.TgZ(4,"p",9),t._uU(5," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. "),t.qZA()(),t.YNc(6,I,62,26,"div",10),t.YNc(7,y,2,0,"ng-template",11,12,t.W1O),t.qZA()),2&e){const i=t.MAs(8),o=t.oxw();t.xp6(6),t.Q6J("ngIf",!o.isLoading)("ngIfElse",i)}}const w=[{path:"",component:(()=>{class e{constructor(i,o,s,p,Q){this.toastr=i,this.formsService=o,this.router=s,this.officeService=p,this.translate=Q,this.section="",this.submittedLogin=!1,this.submittedSignup=!1,this.cities=[],this.isLoading=!1,this.formsService.background.subscribe(j=>{this.background=j})}ngOnInit(){this.section="login",this.loginForm=new n.cw({email:new n.NI("",[n.kI.required,n.kI.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/)]),password:new n.NI("",[n.kI.required,n.kI.minLength(6)])}),this.signupForm=new n.cw({nome:new n.NI("",n.kI.required),cognome:new n.NI("",n.kI.required),citta:new n.NI("",n.kI.required),regione:new n.NI("",n.kI.required),cap:new n.NI("",n.kI.required),email:new n.NI("",[n.kI.required,n.kI.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/)]),password:new n.NI("",[n.kI.required,n.kI.minLength(6)]),sex:new n.NI("",n.kI.required)}),this.formsService.getCities().subscribe({next:i=>{this.cities=i},error:i=>{this.toastr.error(i?.message||r.N.COMMON_ERROR)},complete:()=>{}})}login(){this.submittedLogin=!0,this.loginForm.valid?this.formsService.login({email:this.loginForm.controls.email.value,password:this.loginForm.controls.password.value}).subscribe({next:o=>{o&&o[0]?(localStorage.setItem("email",o[0].email),localStorage.setItem("password",o[0].password),this.officeService.setUser(o[0]),this.toastr.show("en"==this.translate.currentLang?r.y.EN_SUCCESFULY_LOGGED:r.y.SUCCESFULY_LOGGED),this.formsService.authenticateUser(!0),setTimeout(()=>{this.router.navigate(["/office"])},1e3)):(console.log(r.y.EN_USER_NOT_EXISTS,r.y.USER_NOT_EXISTS),this.toastr.error("en"==this.translate.currentLang?r.y.EN_USER_NOT_EXISTS:r.y.USER_NOT_EXISTS))},error:o=>{this.toastr.error(o?.message||"en"==this.translate.currentLang?r.N.EN_COMMON_ERROR:r.N.COMMON_ERROR)},complete:()=>{}}):this.toastr.error("en"==this.translate.currentLang?r.N.EN_COMMON_ERROR_FORMS:r.N.COMMON_ERROR_FORMS)}sectionChange(i){i&&(this.isLoading=!0,setTimeout(()=>{this.isLoading=!1,this.section=i,this.submittedLogin=!1,this.submittedSignup=!1},2e3))}register(){if(this.submittedSignup=!0,this.signupForm.valid){let i={nome:this.signupForm.controls.nome.value,cognome:this.signupForm.controls.cognome.value,citta:this.signupForm.controls.citta.value,regione:this.signupForm.controls.regione.value,cap:this.signupForm.controls.cap.value,email:this.signupForm.controls.email.value,password:this.signupForm.controls.password.value,sex:this.signupForm.controls.sex.value};this.formsService.findUserByEmail(i.email).subscribe({next:o=>{o&&o[0]?this.toastr.error("en"==this.translate.currentLang?r.y.EN_USER_ALREADY_EXISTS:r.y.USER_ALREADY_EXISTS):this.formsService.register(i).subscribe({next:s=>{this.toastr.show("en"==this.translate.currentLang?r.y.EN_SUCCESFULY_SIGNED:r.y.SUCCESFULY_SIGNED),this.isLoading=!0,setTimeout(()=>{this.isLoading=!1,this.section="login"},1500)},error:s=>{this.toastr.error(s?.message||"en"==this.translate.currentLang?r.N.EN_COMMON_ERROR:r.N.COMMON_ERROR)},complete:()=>{}})},error:o=>{this.toastr.error(o?.message||"en"==this.translate.currentLang?r.N.EN_COMMON_ERROR:r.N.COMMON_ERROR)},complete:()=>{}})}else this.toastr.error("en"==this.translate.currentLang?r.N.EN_COMMON_ERROR_FORMS:r.N.COMMON_ERROR_FORMS)}getRegionAndCapByCityName(i){i?this.formsService.getRegionByCityName(i).subscribe({next:o=>{this.region=o,this.formsService.getCapByRegionName(i).subscribe({next:s=>{this.cap=s,this.signupForm.controls.regione.setValue(this.region[0].name),this.signupForm.controls.cap.setValue(this.cap[0].cap),this.signupForm.updateValueAndValidity()},error:s=>{this.toastr.error(s?.message||"en"==this.translate.currentLang?r.N.EN_COMMON_ERROR:r.N.COMMON_ERROR)},complete:()=>{}})},error:o=>{this.toastr.error(o?.message||"en"==this.translate.currentLang?r.N.EN_COMMON_ERROR:r.N.COMMON_ERROR)},complete:()=>{}}):this.toastr.error("en"==this.translate.currentLang?r.y.EN_INSERT_CITY:r.y.INSERT_CITY)}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(h._W),t.Y36(v.s),t.Y36(m.F0),t.Y36(Z.l),t.Y36(u.sK))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-forms"]],decls:11,vars:6,consts:[[1,"row","p-0","m-0",3,"ngClass"],[1,"container","text-center","py-5"],[1,"row"],[1,"col-md-12","py-5"],[1,"col-md-12"],["class","row",4,"ngIf","ngIfElse"],["signup",""],[1,"col-md-6"],[1,"fs-3"],[1,"fs-5"],["class","col-md-6",4,"ngIf","ngIfElse"],["class","p-0 m-0"],["spinner",""],[1,"w-75","m-auto",3,"formGroup"],[1,"row","border","rounded","p-3"],[1,"py-3"],["type","email","formControlName","email",1,"form-control"],["class","text-danger",4,"ngIf"],["type","password","formControlName","password",1,"form-control"],["type","button",1,"btn","btn-dark","w-75","m-auto","my-3",3,"click"],["type","button",1,"btn",3,"ngClass","click"],[1,"text-danger"],[1,"m-auto"],["type","text","formControlName","nome",1,"form-control"],["type","text","formControlName","cognome",1,"form-control"],["type","text","formControlName","citta",1,"form-select",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","regione","readonly","",1,"form-control"],["type","text","formControlName","cap","readonly","",1,"form-control"],[1,"col-md-6","py-4"],["type","radio","name","sex","id","flexRadioDefault1","value","M","formControlName","sex",1,"form-check-input"],["for","flexRadioDefault1",1,"form-check-label","px-3"],["type","radio","name","sex","id","flexRadioDefault2","value","F","formControlName","sex",1,"form-check-input"],["for","flexRadioDefault2",1,"form-check-label","px-3"],[3,"value"]],template:function(o,s){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"div",4),t.YNc(8,F,9,2,"div",5),t.YNc(9,M,9,2,"ng-template",null,6,t.W1O),t.qZA()()()()),2&o){const p=t.MAs(10);t.Q6J("ngClass",s.background?"bg-secondary text-light":"bg-white text-dark"),t.xp6(5),t.Oqu(t.lcZ(6,4,"titleForms")),t.xp6(3),t.Q6J("ngIf","login"==s.section)("ngIfElse",p)}},dependencies:[c.mk,c.sg,c.O5,n._Y,n.YN,n.Kr,n.Fj,n.EJ,n._,n.JJ,n.JL,n.sg,n.u,_.Ou,u.X$],styles:["h1[_ngcontent-%COMP%]{font-family:Waiting for the Sunrise,cursive;font-weight:400;font-style:normal;font-size:40px}"]})}return e})()}];let Y=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(w),m.Bz]})}return e})();var d=l(9862),k=l(5061);function f(e){return new k.w(e,"../../assets/i18n/",".json")}let J=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[c.ez,Y,n.UX,d.JF,_.Cq,u.aw.forChild({defaultLanguage:"en",useDefaultLang:!0,loader:{provide:u.Zw,useFactory:f,deps:[d.eN]}})]})}return e})()}}]);