"use strict";(self.webpackChunktask_app=self.webpackChunktask_app||[]).push([[384],{5384:(Y,p,a)=>{a.r(p),a.d(p,{FormsModule:()=>k});var m=a(6814),c=a(787),o=a(95),l=a(4574),t=a(5879),d=a(2425),_=a(4229),f=a(3234),g=a(5940);function v(i,s){1&i&&(t.TgZ(0,"p",20),t._uU(1," Campo invalido, prova ad inserire un valore tipo 'a@a.com' "),t.qZA())}function Z(i,s){1&i&&(t.TgZ(0,"p",20),t._uU(1," Valore invalido, prova ad inserire almeno 6 caratteri. "),t.qZA())}function h(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",6)(1,"form",12)(2,"div",13)(3,"div",3)(4,"label",14),t._uU(5,"Email"),t.qZA(),t._UZ(6,"input",15),t.YNc(7,v,2,0,"p",16),t.qZA(),t.TgZ(8,"div",3)(9,"label",14),t._uU(10,"Password"),t.qZA(),t._UZ(11,"input",17),t.YNc(12,Z,2,0,"p",16),t.TgZ(13,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.login())}),t._uU(14," Login "),t.qZA(),t.TgZ(15,"p"),t._uU(16,"or"),t.qZA(),t._UZ(17,"hr"),t.TgZ(18,"button",19),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.sectionChange("signup"))}),t._uU(19," Register "),t.qZA()()()()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.loginForm),t.xp6(6),t.Q6J("ngIf",1==e.submittedLogin&&e.loginForm.controls.email.invalid),t.xp6(5),t.Q6J("ngIf",1==e.submittedLogin&&e.loginForm.controls.password.invalid)}}function x(i,s){1&i&&(t.TgZ(0,"div",6),t._UZ(1,"mat-spinner",21),t.qZA())}function C(i,s){if(1&i&&(t.TgZ(0,"div",1)(1,"div",6)(2,"p",7),t._uU(3,"Login"),t.qZA(),t.TgZ(4,"p",8),t._uU(5," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. "),t.qZA()(),t.YNc(6,h,20,3,"div",9),t.YNc(7,x,2,0,"ng-template",10,11,t.W1O),t.qZA()),2&i){const e=t.MAs(8),n=t.oxw();t.xp6(6),t.Q6J("ngIf",!n.isLoading)("ngIfElse",e)}}function F(i,s){1&i&&(t.TgZ(0,"p",20),t._uU(1," Campo invalido, inserisci un valore. "),t.qZA())}function T(i,s){1&i&&(t.TgZ(0,"p",20),t._uU(1," Campo invalido, inserisci un valore. "),t.qZA())}function A(i,s){if(1&i&&(t.TgZ(0,"option",34),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.s9C("value",e.name),t.xp6(1),t.hij(" ",e.name," ")}}function q(i,s){1&i&&(t.TgZ(0,"p",20),t._uU(1," Campo invalido, seleziona un valore. "),t.qZA())}function b(i,s){1&i&&(t.TgZ(0,"p",20),t._uU(1," Campo invalido. "),t.qZA())}function N(i,s){1&i&&(t.TgZ(0,"p",20),t._uU(1," Campo invalido. "),t.qZA())}function U(i,s){1&i&&(t.TgZ(0,"p",20),t._uU(1," Campo invalido, prova ad inserire un valore tipo 'a@a.com' "),t.qZA())}function I(i,s){1&i&&(t.TgZ(0,"p",20),t._uU(1," Valore invalido, prova ad inserire almeno 6 caratteri. "),t.qZA())}function w(i,s){1&i&&(t.TgZ(0,"p",20),t._uU(1," Campo invalido, seleziona un valore. "),t.qZA())}function y(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",6)(1,"form",12)(2,"div",13)(3,"div",3)(4,"label",14),t._uU(5,"Nome"),t.qZA(),t._UZ(6,"input",22),t.YNc(7,F,2,0,"p",16),t.qZA(),t.TgZ(8,"div",3)(9,"label",14),t._uU(10,"Cognome"),t.qZA(),t._UZ(11,"input",23),t.YNc(12,T,2,0,"p",16),t.qZA(),t.TgZ(13,"div",3)(14,"label",14),t._uU(15,"Citt\xe0"),t.qZA(),t.TgZ(16,"select",24),t.NdJ("change",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.getRegionAndCapByCityName(r.signupForm.controls.citta.value))}),t._UZ(17,"option",25),t.YNc(18,A,2,2,"option",26),t.qZA(),t.YNc(19,q,2,0,"p",16),t.qZA(),t.TgZ(20,"div",6)(21,"label",14),t._uU(22,"Regione"),t.qZA(),t._UZ(23,"input",27),t.YNc(24,b,2,0,"p",16),t.qZA(),t.TgZ(25,"div",6)(26,"label",14),t._uU(27,"Cap"),t.qZA(),t._UZ(28,"input",28),t.YNc(29,N,2,0,"p",16),t.qZA(),t.TgZ(30,"div",3)(31,"label",14),t._uU(32,"Email"),t.qZA(),t._UZ(33,"input",15),t.YNc(34,U,2,0,"p",16),t.qZA(),t.TgZ(35,"div",3)(36,"label",14),t._uU(37,"Password"),t.qZA(),t._UZ(38,"input",17),t.YNc(39,I,2,0,"p",16),t.qZA(),t.TgZ(40,"div",29),t._UZ(41,"input",30),t.TgZ(42,"label",31),t._uU(43," M "),t.qZA()(),t.TgZ(44,"div",29),t._UZ(45,"input",32),t.TgZ(46,"label",33),t._uU(47," F "),t.qZA()(),t.TgZ(48,"div",3),t.YNc(49,w,2,0,"p",16),t.qZA(),t.TgZ(50,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.register())}),t._uU(51," Signup "),t.qZA(),t.TgZ(52,"p"),t._uU(53,"or"),t.qZA(),t._UZ(54,"hr"),t.TgZ(55,"button",19),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.sectionChange("login"))}),t._uU(56," Login "),t.qZA()()()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.signupForm),t.xp6(6),t.Q6J("ngIf",1==e.submittedSignup&&e.signupForm.controls.nome.invalid),t.xp6(5),t.Q6J("ngIf",1==e.submittedSignup&&e.signupForm.controls.cognome.invalid),t.xp6(6),t.Q6J("ngForOf",e.cities),t.xp6(1),t.Q6J("ngIf",1==e.submittedSignup&&e.signupForm.controls.citta.invalid),t.xp6(5),t.Q6J("ngIf",1==e.submittedSignup&&e.signupForm.controls.regione.invalid),t.xp6(5),t.Q6J("ngIf",1==e.submittedSignup&&e.signupForm.controls.cap.invalid),t.xp6(5),t.Q6J("ngIf",1==e.submittedSignup&&e.signupForm.controls.email.invalid),t.xp6(5),t.Q6J("ngIf",1==e.submittedSignup&&e.signupForm.controls.password.invalid),t.xp6(10),t.Q6J("ngIf",1==e.submittedSignup&&e.signupForm.controls.sex.invalid)}}function R(i,s){1&i&&(t.TgZ(0,"div",6),t._UZ(1,"mat-spinner",21),t.qZA())}function S(i,s){if(1&i&&(t.TgZ(0,"div",1)(1,"div",6)(2,"p",7),t._uU(3,"Signup"),t.qZA(),t.TgZ(4,"p",8),t._uU(5," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. "),t.qZA()(),t.YNc(6,y,57,10,"div",9),t.YNc(7,R,2,0,"ng-template",10,11,t.W1O),t.qZA()),2&i){const e=t.MAs(8),n=t.oxw();t.xp6(6),t.Q6J("ngIf",!n.isLoading)("ngIfElse",e)}}const M=[{path:"",component:(()=>{class i{constructor(e,n,r,u){this.toastr=e,this.formsService=n,this.router=r,this.officeService=u,this.section="",this.submittedLogin=!1,this.submittedSignup=!1,this.cities=[],this.isLoading=!1}ngOnInit(){this.section="login",this.loginForm=new o.cw({email:new o.NI("",[o.kI.required,o.kI.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/)]),password:new o.NI("",[o.kI.required,o.kI.minLength(6)])}),this.signupForm=new o.cw({nome:new o.NI("",o.kI.required),cognome:new o.NI("",o.kI.required),citta:new o.NI("",o.kI.required),regione:new o.NI("",o.kI.required),cap:new o.NI("",o.kI.required),email:new o.NI("",[o.kI.required,o.kI.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/)]),password:new o.NI("",[o.kI.required,o.kI.minLength(6)]),sex:new o.NI("",o.kI.required)}),this.formsService.getCities().subscribe({next:e=>{this.cities=e},error:e=>{this.toastr.error(e?.message||l.N.COMMON_ERROR)},complete:()=>{}})}login(){this.submittedLogin=!0,this.loginForm.valid?this.formsService.login({email:this.loginForm.controls.email.value,password:this.loginForm.controls.password.value}).subscribe({next:n=>{n&&n[0]?(localStorage.setItem("email",n[0].email),localStorage.setItem("password",n[0].password),this.officeService.setUser(n[0]),this.toastr.show("Login effettuato con successo."),this.formsService.authenticateUser(!0),setTimeout(()=>{this.router.navigate(["/office"])},1e3)):this.toastr.error("Mi dispiace ma non abbiamo un user in db con le credenziali che hai inserito.")},error:n=>{this.toastr.error(n?.message||l.N.COMMON_ERROR)},complete:()=>{}}):this.toastr.error(l.N.COMMON_ERROR_FORMS)}sectionChange(e){e&&(this.isLoading=!0,setTimeout(()=>{this.isLoading=!1,this.section=e,this.submittedLogin=!1,this.submittedSignup=!1},2e3))}register(){if(this.submittedSignup=!0,this.signupForm.valid){let e={nome:this.signupForm.controls.nome.value,cognome:this.signupForm.controls.cognome.value,citta:this.signupForm.controls.citta.value,regione:this.signupForm.controls.regione.value,cap:this.signupForm.controls.cap.value,email:this.signupForm.controls.email.value,password:this.signupForm.controls.password.value,sex:this.signupForm.controls.sex.value};this.formsService.findUserByEmail(e.email).subscribe({next:n=>{n&&n[0]?this.toastr.error("Esiste gi\xe0 un'user con questa email in db."):this.formsService.register(e).subscribe({next:r=>{this.toastr.show("Complimenti! Ti sei registrato con successo."),this.isLoading=!0,setTimeout(()=>{this.isLoading=!1,this.section="login"},1500)},error:r=>{this.toastr.error(r?.message||l.N.COMMON_ERROR)},complete:()=>{}})},error:n=>{this.toastr.error(n?.message||l.N.COMMON_ERROR)},complete:()=>{}})}else this.toastr.error(l.N.COMMON_ERROR_FORMS)}getRegionAndCapByCityName(e){e?this.formsService.getRegionByCityName(e).subscribe({next:n=>{this.region=n,this.formsService.getCapByRegionName(e).subscribe({next:r=>{this.cap=r,this.signupForm.controls.regione.setValue(this.region[0].name),this.signupForm.controls.cap.setValue(this.cap[0].cap),this.signupForm.updateValueAndValidity()},error:r=>{this.toastr.error(r?.message||"C'\xe8 stato un problema nel recupero della regione.")},complete:()=>{}})},error:n=>{this.toastr.error(n?.message||"C'\xe8 stato un problema nel recupero del cap.")},complete:()=>{}}):this.toastr.error("Devi inserire una citt\xe0.")}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(d._W),t.Y36(_.s),t.Y36(c.F0),t.Y36(f.l))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-forms"]],decls:9,vars:2,consts:[[1,"container","text-center","py-5"],[1,"row"],[1,"col-md-12","py-5"],[1,"col-md-12"],["class","row",4,"ngIf","ngIfElse"],["signup",""],[1,"col-md-6"],[1,"fs-3"],[1,"fs-5"],["class","col-md-6",4,"ngIf","ngIfElse"],["class","p-0 m-0"],["spinner",""],[1,"w-75","m-auto",3,"formGroup"],[1,"row","border","rounded","p-3"],[1,"py-3"],["type","email","formControlName","email",1,"form-control"],["class","text-danger",4,"ngIf"],["type","password","formControlName","password",1,"form-control"],["type","button",1,"btn","btn-dark","w-75","m-auto","my-3",3,"click"],["type","button",1,"btn",3,"click"],[1,"text-danger"],[1,"m-auto"],["type","text","formControlName","nome",1,"form-control"],["type","text","formControlName","cognome",1,"form-control"],["type","text","formControlName","citta",1,"form-select",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","regione","readonly","",1,"form-control"],["type","text","formControlName","cap","readonly","",1,"form-control"],[1,"col-md-6","py-4"],["type","radio","name","sex","id","flexRadioDefault1","value","M","formControlName","sex",1,"form-check-input"],["for","flexRadioDefault1",1,"form-check-label","px-3"],["type","radio","name","sex","id","flexRadioDefault2","value","F","formControlName","sex",1,"form-check-input"],["for","flexRadioDefault2",1,"form-check-label","px-3"],[3,"value"]],template:function(n,r){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4,"Scopri il rivoluzionario modo di tracciare i task."),t.qZA()(),t.TgZ(5,"div",3),t.YNc(6,C,9,2,"div",4),t.YNc(7,S,9,2,"ng-template",null,5,t.W1O),t.qZA()()()),2&n){const u=t.MAs(8);t.xp6(6),t.Q6J("ngIf","login"==r.section)("ngIfElse",u)}},dependencies:[m.sg,m.O5,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o._,o.JJ,o.JL,o.sg,o.u,g.Ou],styles:["h1[_ngcontent-%COMP%]{font-family:Waiting for the Sunrise,cursive;font-weight:400;font-style:normal;font-size:40px}"]})}return i})()}];let O=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(M),c.Bz]})}return i})();var J=a(9862);let k=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[m.ez,O,o.UX,J.JF,g.Cq]})}return i})()}}]);